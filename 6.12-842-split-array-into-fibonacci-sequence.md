---
tags:
  - leetcode
  - string
  - backtracking
  - greedy
created: '2019/6/14 下午11:06:54'
difficulty: medium
---

# 0842-split-array-into-fibonacci-sequence

## Problem

Given a string `S` of digits, such as `S = "123456579"`, we can split it into a _Fibonacci-like sequence_ `[123, 456, 579].`  
  


Formally, a Fibonacci-like sequence is a list `F` of non-negative integers such that:  
  


* * `0 <= F[i] <= 2^31 - 1`, \(that is, each integer fits a 32-bit signed integer type\);
* * `F.length >= 3`;
* * and `F[i] + F[i+1] = F[i+2]` for all `0 <= i < F.length - 2`.
* 
Also, note that when splitting the string into pieces, each piece must not have extra leading zeroes, except if the piece is the number 0 itself.  
  


Return any Fibonacci-like sequence split from `S`, or return `[]` if it cannot be done.  
  


**Example 1:**  
  


```text
Input: "123456579"
Output: [123,456,579]
```

**Example 2:**  
  


```text
Input: "11235813"
Output: [1,1,2,3,5,8,13]
```

**Example 3:**  
  


```text
Input: "112358130"
Output: []
Explanation: The task is impossible.
```

**Example 4:**  
  


```text
Input: "0123"
Output: []
Explanation: Leading zeroes are not allowed, so "01", "2", "3" is not valid.
```

**Example 5:**  
  


```text
Input: "1101111"
Output: [110, 1, 111]
Explanation: The output [11, 0, 11, 11] would also be accepted.
```

**Note:**  
  


1. 2. `1 <= S.length <= 200`
3. 4. `S` contains only digits.
5. 
## Solution

java

```java
class Solution {
    boolean find = false;
    List<Integer> res = new ArrayList<>();
    public List<Integer> splitIntoFibonacci(String S) {
        //back Tracking
        //for the last number, it can be 1 digit, 2 digits...to Integer.MAX__VALUE
        //int large = last number
        //int smaller = the number before larger
        //int next = large - small, which should be found in the string before index
        int l = S.length();
        List<Integer> temp = new ArrayList<>();
        for (int i = l - 1; i >= 0; i--) {
            long large = Long.parseLong(S.substring(i, l)); 
            if (S.charAt(i) == '0' && l - i > 1) {
                continue;
            }
            if (large > Integer.MAX_VALUE) {
                break;
            }
            temp.add((int)large);
            for (int j = i - 1; j > 0; j--) {
                long small = Long.parseLong(S.substring(j, i));
                if (S.charAt(j) == '0' && i - j > 1) {
                    continue;
                }
                if (small > Integer.MAX_VALUE) {
                    break;
                }
                temp.add((int)small);
                if (res.size() != 0) {
                    return res;
                }
                helper(temp, large, small, j - 1, S);
                temp.remove(temp.size() - 1);
            }
            temp.remove(temp.size() - 1);
        }
        return res;
    }

    private void helper(List<Integer> temp, long large, long small, int index, String s) {
        //System.out.println(large + " " + small);
        if (find) {
            return;
        }
​
```

